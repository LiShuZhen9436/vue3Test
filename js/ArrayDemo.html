<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数组方法练习</title>
</head>
<body>
    <script>
        console.log('****************数组添加移除项********************************')
        let array=['1','2','3','4','5']
        let len=array.push('6') // 向数组末尾添加项 并返回数组的长度
        console.log("在数组末尾添加数组 并返回数组的长度：",len)
        console.log('array:',array)

        let ary1=array.pop(); // 从数组末尾移除数据 并返回移除的值
        console.log('从数组末尾移除项 ary1:',ary1)
        console.log('ary:',array)

        let ary2=array.shift(); // 从数组头部移除数据 并返回移除的值
        console.log('从数组头部移除数据 ary2:',ary2);
        console.log('ary:', array);

        let ary3=array.unshift("p"); // 从数组头部添加数据 并返回数组的长度
        console.log('在数组头部添加项 arry3:',ary3)
        console.log('ary:',array); // ["p", "2", "3", "4", "5"]

        console.log("***********************数组截取**********************************")

        // 数组截取
        let nAry = ['aa','b','cc','dd','ggg','hhhh'];

        let scliceAry = nAry.slice(1,4); // 数组截取 第一个参数截取的开始位置 第二个参数截取的结束位置 ["b", "cc", "dd"]
        console.log('scliceAry:',scliceAry);
        console.log('nary:',nAry);

        console.log("*********************数组遍历**********************************")
        // 数组遍历
        let bilAry=['a','b','c','d','e','f','g','h',{'k':'55'}];
        let q = bilAry.forEach((item,index,ary)=>{ // forEach 遍历没有返回值
            // console.log(' item:',item,' index:',index,' ary:',ary);
        })
        console.log('q:',q)

        console.log('-------------------map遍历---------------------------------')
        let w = bilAry.map((item,index,ary)=>{ // map 遍历数组 返回一个新数组  如果数组对象只有一层引用不会改变原数组，有多层时会改变原数组对象 属于浅拷贝
            console.log(' item:',item,' index:',index,' ary:',ary);
            if(index ===8) {
                item.k="666"
            } else{
                item = item+'1';
            }
            return item;
        })
        console.log('w:',w)
        console.log('bilAry:',bilAry)

        console.log('-----------------------for of 遍历---------------------------------')
        for(val of bilAry){ // 可以正确响应break、continue
            console.log(val)
            if (val === 'g'){break}
        }

        for(val of bilAry.keys()){ // 遍历数组的键
            console.log('for-of keys 遍历键:',val);// 0,1,2,3,4,5,6,7,8
        }
        for(val of bilAry.values()){ // 遍历数组的值
            console.log('for-of values 遍历键:',val);// a,b,c,d,e,f,g,h,{'k':'55'}
        }
        for(val of bilAry.entries()){ // 遍历数组的key value
            console.log('for-of values 遍历键:',val);// [0, "a"],[1, "b"],[2, "c"].....[8, {…}]
        }


        console.log('------------------------filter 遍历----------------------------')
        let f = bilAry.filter((item,index,ary)=>{ // 返回新数组
            console.log(' item:',item,' index:',index,' ary:',ary)
            if(index === 8) {item.k="888";return item}
            return item
        })
        console.log('filter遍历数组:',f);
        console.log('原数组：', bilAry);

        console.log('-------------------------every 遍历-------------------------------')
        let g = bilAry.every((item,index,ary)=>{ // 数组的每一项都遍历 都符合函数条件时 才会返回true 否则返回false  返回值类型为bool
            return index > -1
        })
        console.log('every 遍历：',g)

        console.log('--------------------------some遍历----------------------------------------')
        let p = bilAry.some((item,index,ary)=>{ // 数组的每一项都遍历 只要有一项符合条件 就会返回true 否则返回false 返回类型为bool
            return index>4
        })
        console.log('some遍历：',p)

        console.log('--------------------------reduce 累加器--------------------------------------')
        let sumAry=[1,2,3,4,5]
        let sum=sumAry.reduce((pre,current,curIndex,ary)=>{ // pre 上一次回调函数的返回值，当前元素值，当前元素索引，调用reduce的数组
            //console.log('pre:!!!!!',pre)
            return pre+current
        })// 不传第二个参数时，默认为数组第一项
        console.log('reduce 累加求和：', sum)
        let sum2=sumAry.reduce((pre,current,curIndex,ary)=>{ // pre 上一次回调函数的返回值，当前元素值，当前元素索引，调用reduce的数组
            //console.log('pressss:',pre)
            return pre+current
        }, -5);// -5 作为第一次调用 callback 的第一个参数。pre
        console.log('reduce 累加求和：', sum2)

        console.log('--------------------------reduce 高级用法--------------------------------------')
        let repeatAry=['q','w','r','q','r','q']; // 1、查询数组中的重复数据重复的次数
        let repAry=repeatAry.reduce((pre,cur)=>{
            // console.log('pre:',pre);
            // console.log('cur:',cur);
            if(cur in pre){
                pre[cur]+=1
            } else{
                pre[cur]=1
            }
            // console.log('对象:',pre)
            return pre
        },{}) // {} 第一次调用callback 的第一个参数 即 pre
        console.log('数组中对象的重复次数：', repAry); // {q: 3, w: 1, r: 2}

        let remoVal=repeatAry.reduce((pre,cur)=>{ // 2、去除数组中的重复项
            // console.log('pre:',pre,'cur:',cur)
            if(!pre.includes(cur)){
                return pre.concat(cur)
            }else{
                return pre
            }
            // if(pre.includes(cur)){
            //     return pre
            // } else{
            //     pre.push(cur)
            //     return pre
            // }
        },[])
        console.log('去除重复数据后的数组：', remoVal) // ["q", "w", "r"]

        let bpAry=[1,[2,3],4,[5,6,7],8]
        let endAry=bpAry.reduce((pre,cur)=>{ // 3、数组扁平化 二维变一维
            pre=pre.concat(cur)
            return pre
        },[])
        console.log('扁平化后的数组：', endAry);
        console.log('扁平化数组2：', bpAry.flat()); // es6 新增的扁平化方法

        let objAry=[{
            name:'张三',
            age:12
        },{
            name:'李四',
            age:12
        },{
            name:'王五',
            age:12
        }]
        let pSum=objAry.reduce((pre,cur)=>{ // 4、属性求和  
            return pre+cur.age
        },0)
        console.log('属性求和：',pSum);

        console.log('-------------------------数组find-----------------------------------')
        let fArys=[1,2,4,5,6]
        let res=fArys.find((item,index)=>item>3); // 法返回数组中符合测试函数条件的第一个元素。否则返回undefined 
        console.log('find返回数据:',res)

        console.log('-------------------------数组 findIndex-----------------------------------------')
        let findAry=[1,2,3,4,5,6];
        let r=findAry.findIndex((val,index,obj)=>{ // 返回符合元素的索引值; 只要有一个元素返回 true 则执行完毕返回索引值;如果没有符合的元素则返回-1
            console.log(val,index,obj)
            return (val>3) // 返回的索引值 3
            // return (val===3) // 2
            // return (val>7) // -1
        })
        console.log('findIndex返回数据：',r)


        console.log("***********************字符串截取****************************")
        let v="fffghkll;;o"
        let substringAry=v.substring(2,5); // substring字符串的截取方法 第一个参数开始位置 第二个参数结束位置 返回截取到的字符串 fgh
        console.log("substring 截取返回值：",substringAry)

        let subStr=v.substr(3,1); // 截取字符串 第一个参数时起始位置 第二个参数是字符串的长度
        console.log('subStr:',subStr);


    </script>
</body>
</html>